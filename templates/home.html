{% extends "base.html" %}
{% load auth_extras %} {# Load our custom tag #}

{% block title %}Welcome - IT Ticketing System{% endblock %}

{% block content %}
<div class="px-4 py-5 my-5 text-center">
    <h1 class="display-5 fw-bold">IT Ticketing System</h1>
    <div class="col-lg-6 mx-auto">
        <p class="lead mb-4">Welcome to our support portal. Please log in to access your tickets or create a new one. If you are an agent, log in to manage support requests.</p>
        <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
            {% if user.is_authenticated %}
                <p>You are logged in as {{ user.username }}.</p>
                {% if user|is_in_group:"Customers" %}
                    <a href="{% url 'customer_dashboard' %}" class="btn btn-primary btn-lg px-4 gap-3">My Dashboard</a>
                {% elif user|is_in_group:"Agents" or user|is_in_group:"Admins" or user.is_superuser %}
                    <a href="{% url 'agent_dashboard' %}" class="btn btn-info btn-lg px-4">Agent Dashboard</a>
                {% endif %}
                 <form method="post" action="{% url 'logout' %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-secondary btn-lg px-4">Logout</button>
                </form>
            {% else %}
                <a href="{% url 'login' %}" class="btn btn-primary btn-lg px-4 gap-3">Login</a>
                <a href="{% url 'register_customer' %}" class="btn btn-outline-secondary btn-lg px-4">Register</a>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
